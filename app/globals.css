@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        --background: 0 0% 100%;
        --foreground: 222.2 84% 4.9%;

        --card: 0 0% 100%;
        --card-foreground: 222.2 84% 4.9%;

        --popover: 0 0% 100%;
        --popover-foreground: 222.2 84% 4.9%;

        --primary: 221 83% 53%;
        --primary-foreground: 210 40% 98%;

        --secondary: 210 40% 96.1%;
        --secondary-foreground: 222.2 47.4% 11.2%;

        --muted: 210 40% 96.1%;
        --muted-foreground: 215.4 16.3% 46.9%;

        --accent: 210 40% 96.1%;
        --accent-foreground: 222.2 47.4% 11.2%;

        --destructive: 0 84.2% 60.2%;
        --destructive-foreground: 210 40% 98%;

        --border: 214.3 31.8% 91.4%;
        --input: 214.3 31.8% 91.4%;
        --ring: 222.2 84% 4.9%;

        /* Default color scheme - Blue accent */
        --chart-1: #008bf8;
        --chart-2: #ff9914;
        --chart-3: #1be7ff;
        --chart-4: #89fc00;
        --chart-5: #04e762;
        --chart-6: #f21b3f;

        --accent-primary: 221 83% 53%;
        --accent-primary-hover: 221 83% 48%;
        --accent-secondary: 210 40% 96.1%;
        --chart-accent-1: #3b82f6;
        --chart-accent-2: #60a5fa;
        --chart-accent-3: #93c5fd;

        --radius: 0.5rem;

        --sidebar-background: 0 0% 98%;

        --sidebar-foreground: 240 5.3% 26.1%;

        --sidebar-primary: 240 5.9% 10%;

        --sidebar-primary-foreground: 0 0% 98%;

        --sidebar-accent: 240 4.8% 95.9%;

        --sidebar-accent-foreground: 240 5.9% 10%;

        --sidebar-border: 220 13% 91%;

        --sidebar-ring: 217.2 91.2% 59.8%;

        /* Density variables - Comfortable (default) - SPACIOUS */
        --spacing-xs: 0.625rem;      /* 10px */
        --spacing-sm: 1rem;           /* 16px */
        --spacing-md: 1.5rem;         /* 24px */
        --spacing-lg: 2rem;           /* 32px */
        --spacing-xl: 3rem;           /* 48px */
        --spacing-2xl: 4rem;          /* 64px */

        --text-xs: 0.8125rem;         /* 13px */
        --text-sm: 0.9375rem;         /* 15px */
        --text-base: 1.0625rem;       /* 17px */
        --text-lg: 1.25rem;           /* 20px */
        --text-xl: 1.5rem;            /* 24px */

        --table-row-height: 3.5rem;   /* 56px */
        --card-padding: 2rem;         /* 32px */
        --card-gap: 1.5rem;           /* 24px */
        --section-gap: 2.5rem;        /* 40px */
        --button-padding-y: 0.625rem; /* 10px */
        --button-padding-x: 1.25rem;  /* 20px */
        --button-height: 2.75rem;     /* 44px */
        --input-height: 2.75rem;      /* 44px */
        --border-radius: 0.75rem;     /* 12px */
    }

    .dark {
        --background: 222.2 84% 4.9%;
        --foreground: 210 40% 98%;

        --card: 222.2 84% 4.9%;
        --card-foreground: 210 40% 98%;

        --popover: 222.2 84% 4.9%;
        --popover-foreground: 210 40% 98%;

        --primary: 210 40% 98%;
        --primary-foreground: 222.2 47.4% 11.2%;

        --secondary: 217.2 32.6% 17.5%;
        --secondary-foreground: 210 40% 98%;

        --muted: 217.2 32.6% 17.5%;
        --muted-foreground: 215 20.2% 65.1%;

        --accent: 217.2 32.6% 17.5%;
        --accent-foreground: 210 40% 98%;

        --destructive: 0 62.8% 30.6%;
        --destructive-foreground: 210 40% 98%;

        --border: 217.2 32.6% 17.5%;
        --input: 217.2 32.6% 17.5%;
        --ring: 212.7 26.8% 83.9%;
        --sidebar-background: 240 5.9% 10%;
        --sidebar-foreground: 240 4.8% 95.9%;
        --sidebar-primary: 224.3 76.3% 48%;
        --sidebar-primary-foreground: 0 0% 100%;
        --sidebar-accent: 240 3.7% 15.9%;
        --sidebar-accent-foreground: 240 4.8% 95.9%;
        --sidebar-border: 240 3.7% 15.9%;
        --sidebar-ring: 217.2 91.2% 59.8%;
    }

    /* ============================================
       COLOR SCHEMES / PALETTES
       ============================================ */

    /* Default Scheme (Blue) - Already defined above */
    .color-scheme-default {
        --accent-primary: 221 83% 53%;
        --accent-primary-hover: 221 83% 48%;
        --chart-accent-1: #3b82f6;
        --chart-accent-2: #60a5fa;
        --chart-accent-3: #93c5fd;
    }

    /* Blue Scheme (Ocean Blue) */
    .color-scheme-blue {
        --accent-primary: 217 91% 60%;
        --accent-primary-hover: 217 91% 55%;
        --chart-accent-1: #0ea5e9;
        --chart-accent-2: #38bdf8;
        --chart-accent-3: #7dd3fc;

        --chart-1: #0ea5e9;
        --chart-2: #f97316;
        --chart-3: #06b6d4;
        --chart-4: #8b5cf6;
        --chart-5: #10b981;
        --chart-6: #ef4444;
    }

    /* Purple Scheme (Violet) */
    .color-scheme-purple {
        --accent-primary: 262 83% 58%;
        --accent-primary-hover: 262 83% 53%;
        --chart-accent-1: #8b5cf6;
        --chart-accent-2: #a78bfa;
        --chart-accent-3: #c4b5fd;

        --chart-1: #8b5cf6;
        --chart-2: #f59e0b;
        --chart-3: #a855f7;
        --chart-4: #ec4899;
        --chart-5: #14b8a6;
        --chart-6: #ef4444;
    }

    /* Green Scheme (Emerald) */
    .color-scheme-green {
        --accent-primary: 142 76% 36%;
        --accent-primary-hover: 142 76% 31%;
        --chart-accent-1: #10b981;
        --chart-accent-2: #34d399;
        --chart-accent-3: #6ee7b7;

        --chart-1: #10b981;
        --chart-2: #f59e0b;
        --chart-3: #14b8a6;
        --chart-4: #3b82f6;
        --chart-5: #22c55e;
        --chart-6: #ef4444;
    }

    /* Orange Scheme (Amber) */
    .color-scheme-orange {
        --accent-primary: 32 95% 44%;
        --accent-primary-hover: 32 95% 39%;
        --chart-accent-1: #f59e0b;
        --chart-accent-2: #fbbf24;
        --chart-accent-3: #fcd34d;

        --chart-1: #f59e0b;
        --chart-2: #ef4444;
        --chart-3: #f97316;
        --chart-4: #8b5cf6;
        --chart-5: #10b981;
        --chart-6: #dc2626;
    }

    /* Rose Scheme (Pink) */
    .color-scheme-rose {
        --accent-primary: 330 81% 60%;
        --accent-primary-hover: 330 81% 55%;
        --chart-accent-1: #f43f5e;
        --chart-accent-2: #fb7185;
        --chart-accent-3: #fda4af;

        --chart-1: #f43f5e;
        --chart-2: #f97316;
        --chart-3: #ec4899;
        --chart-4: #8b5cf6;
        --chart-5: #10b981;
        --chart-6: #dc2626;
    }

    /* Slate Scheme (Professional Gray) */
    .color-scheme-slate {
        --accent-primary: 215 28% 17%;
        --accent-primary-hover: 215 28% 12%;
        --chart-accent-1: #475569;
        --chart-accent-2: #64748b;
        --chart-accent-3: #94a3b8;

        --chart-1: #475569;
        --chart-2: #f97316;
        --chart-3: #64748b;
        --chart-4: #8b5cf6;
        --chart-5: #10b981;
        --chart-6: #ef4444;
    }
}

@layer base {
    * {
        @apply border-border;
    }

    body {
        @apply bg-background text-foreground;
    }
}

/* Chrome, Safari, Edge, Opera */
input[type='search']::-webkit-search-cancel-button {
    -webkit-appearance: none;
    appearance: none;
}

/* Firefox */
input[type='search']::-moz-search-cancel-button {
    display: none;
}

/* Microsoft Edge */
input[type='search']::-ms-clear {
    display: none;
}

html, body {
    overscroll-behavior: none;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    -webkit-tap-highlight-color: transparent;
}

/* ============================================
   UI DENSITY STYLES
   ============================================ */

/* Compact Density - VERY Dense */
.density-compact {
    --spacing-xs: 0.25rem;        /* 4px */
    --spacing-sm: 0.375rem;       /* 6px */
    --spacing-md: 0.625rem;       /* 10px */
    --spacing-lg: 0.875rem;       /* 14px */
    --spacing-xl: 1.25rem;        /* 20px */
    --spacing-2xl: 1.75rem;       /* 28px */

    --text-xs: 0.6875rem;         /* 11px */
    --text-sm: 0.8125rem;         /* 13px */
    --text-base: 0.875rem;        /* 14px */
    --text-lg: 1rem;              /* 16px */
    --text-xl: 1.125rem;          /* 18px */

    --table-row-height: 2rem;     /* 32px */
    --card-padding: 0.75rem;      /* 12px */
    --card-gap: 0.75rem;          /* 12px */
    --section-gap: 1.25rem;       /* 20px */
    --button-padding-y: 0.375rem; /* 6px */
    --button-padding-x: 0.75rem;  /* 12px */
    --button-height: 2rem;        /* 32px */
    --input-height: 2rem;         /* 32px */
    --border-radius: 0.375rem;    /* 6px */
}

/* ============================================
   DENSITY: GLOBAL COMFORTABLE STYLES
   Layout SPACIEUX avec éléments verticaux
   NOTE: Sidebar est TOUJOURS exclus via :not([data-sidebar])
   ============================================ */
.density-comfortable {
    /* FORCE layouts spacieux - Grids deviennent 2-3 colonnes max */
    & .grid.grid-cols-4:not([data-sidebar] *),
    & .grid.md\\:grid-cols-4:not([data-sidebar] *),
    & .grid.lg\\:grid-cols-4:not([data-sidebar] *) {
        grid-template-columns: repeat(2, 1fr) !important;
    }

    & .grid.grid-cols-3:not([data-sidebar] *),
    & .grid.md\\:grid-cols-3:not([data-sidebar] *),
    & .grid.lg\\:grid-cols-3:not([data-sidebar] *) {
        grid-template-columns: repeat(2, 1fr) !important;
    }

    & .grid.grid-cols-5:not([data-sidebar] *),
    & .grid.grid-cols-6:not([data-sidebar] *),
    & .grid.grid-cols-7:not([data-sidebar] *),
    & .grid.grid-cols-8:not([data-sidebar] *) {
        grid-template-columns: repeat(3, 1fr) !important;
    }

    /* Stats cards en 2 colonnes max */
    & .grid-cols-2.md\\:grid-cols-4:not([data-sidebar] *),
    & .grid-cols-2.md\\:grid-cols-5:not([data-sidebar] *) {
        grid-template-columns: repeat(2, 1fr) !important;
    }

    /* Single column for widgets in comfortable */
    & .grid.lg\\:grid-cols-2:not([data-sidebar] *) {
        grid-template-columns: repeat(1, 1fr) !important;
    }

    /* Page containers */
    & .flex.flex-col.gap-6,
    & .space-y-6 > * + * {
        gap: var(--section-gap) !important;
        margin-top: var(--section-gap) !important;
    }

    /* Cards */
    & [class*="card"] > div:first-child,
    & .p-6,
    & .p-4 {
        padding: var(--card-padding) !important;
    }

    & .gap-6,
    & .space-y-6 {
        gap: var(--card-gap) !important;
    }

    & .gap-4,
    & .space-y-4 {
        gap: var(--spacing-lg) !important;
    }

    & .gap-3,
    & .space-y-3 {
        gap: var(--spacing-md) !important;
    }

    /* Tables - EXCLUDE sidebar */
    & table:not([data-sidebar] table) tr {
        height: var(--table-row-height) !important;
    }

    & table:not([data-sidebar] table) td,
    & table:not([data-sidebar] table) th {
        padding: var(--spacing-md) var(--spacing-lg) !important;
        font-size: var(--text-base) !important;
    }

    & table:not([data-sidebar] table) thead th {
        font-size: var(--text-sm) !important;
        font-weight: 600 !important;
    }

    /* Buttons - EXCLUDE sidebar */
    & button:not(.density-ignore):not([data-sidebar] button):not([data-sidebar] *),
    & [role="button"]:not(.density-ignore):not([data-sidebar] [role="button"]):not([data-sidebar] *) {
        padding: var(--button-padding-y) var(--button-padding-x) !important;
        min-height: var(--button-height) !important;
        font-size: var(--text-base) !important;
        border-radius: var(--border-radius) !important;
    }

    & button.h-9:not([data-sidebar] *),
    & button.h-8:not([data-sidebar] *),
    & button.h-7:not([data-sidebar] *) {
        min-height: var(--button-height) !important;
        height: var(--button-height) !important;
    }

    /* Inputs - EXCLUDE sidebar */
    & input:not([type="checkbox"]):not([type="radio"]):not([data-sidebar] input),
    & textarea:not([data-sidebar] textarea),
    & select:not([data-sidebar] select) {
        padding: var(--spacing-sm) var(--spacing-md) !important;
        height: var(--input-height) !important;
        font-size: var(--text-base) !important;
        border-radius: var(--border-radius) !important;
    }

    & textarea {
        height: auto !important;
        min-height: calc(var(--input-height) * 3) !important;
    }

    /* Badges */
    & [class*="badge"],
    & .inline-flex.items-center.rounded {
        padding: 0.375rem 0.875rem !important;
        font-size: var(--text-sm) !important;
        border-radius: calc(var(--border-radius) * 0.75) !important;
    }

    /* Headings */
    & h1 {
        font-size: 2rem !important;
        margin-bottom: var(--spacing-md) !important;
    }

    & h2 {
        font-size: 1.75rem !important;
        margin-bottom: var(--spacing-md) !important;
    }

    & h3 {
        font-size: 1.5rem !important;
        margin-bottom: var(--spacing-sm) !important;
    }

    /* Text */
    & p,
    & span,
    & div {
        font-size: var(--text-base);
    }

    & .text-sm {
        font-size: var(--text-sm) !important;
    }

    & .text-xs {
        font-size: var(--text-xs) !important;
    }

    /* Grid gaps - EXCLUDE sidebar */
    & .grid:not([data-sidebar] .grid) {
        gap: var(--card-gap) !important;
    }
}

/* ============================================
   DENSITY: GLOBAL COMPACT STYLES
   Layout DENSE avec BEAUCOUP de colonnes
   NOTE: Sidebar est TOUJOURS exclus via :not([data-sidebar] *)
   ============================================ */
.density-compact {
    /* FORCE layouts DENSES - Grids deviennent 5-8 colonnes */
    & .grid.grid-cols-2:not([data-sidebar] *),
    & .grid.md\\:grid-cols-2:not([data-sidebar] *) {
        grid-template-columns: repeat(4, 1fr) !important;
    }

    & .grid.grid-cols-3:not([data-sidebar] *),
    & .grid.md\\:grid-cols-3:not([data-sidebar] *),
    & .grid.lg\\:grid-cols-3:not([data-sidebar] *) {
        grid-template-columns: repeat(6, 1fr) !important;
    }

    & .grid.grid-cols-4:not([data-sidebar] *),
    & .grid.md\\:grid-cols-4:not([data-sidebar] *),
    & .grid.lg\\:grid-cols-4:not([data-sidebar] *) {
        grid-template-columns: repeat(8, 1fr) !important;
    }

    & .grid.grid-cols-5:not([data-sidebar] *),
    & .grid.grid-cols-6:not([data-sidebar] *) {
        grid-template-columns: repeat(8, 1fr) !important;
    }

    /* Stats cards en 6-8 colonnes */
    & .grid-cols-2.md\\:grid-cols-4:not([data-sidebar] *),
    & .grid-cols-2.md\\:grid-cols-5:not([data-sidebar] *) {
        grid-template-columns: repeat(6, 1fr) !important;
    }

    /* Widgets en grid dense */
    & .grid.lg\\:grid-cols-2:not([data-sidebar] *) {
        grid-template-columns: repeat(3, 1fr) !important;
    }

    /* Force flex rows to be compact and wrapped */
    & .flex.flex-col:not(.sidebar-content):not([data-sidebar]) {
        flex-direction: row !important;
        flex-wrap: wrap !important;
        align-items: flex-start !important;
    }

    /* Make flex items take minimal space */
    & .flex.flex-col:not(.sidebar-content):not([data-sidebar]) > * {
        flex: 0 1 auto !important;
        max-width: 100% !important;
    }

    /* Page containers */
    & .flex.flex-col.gap-6,
    & .space-y-6 > * + * {
        gap: var(--section-gap) !important;
        margin-top: var(--section-gap) !important;
    }

    /* Cards */
    & [class*="card"] > div:first-child,
    & .p-6,
    & .p-4 {
        padding: var(--card-padding) !important;
    }

    & .gap-6,
    & .space-y-6 {
        gap: var(--card-gap) !important;
    }

    & .gap-4,
    & .space-y-4 {
        gap: var(--spacing-lg) !important;
    }

    & .gap-3,
    & .space-y-3 {
        gap: var(--spacing-md) !important;
    }

    /* Tables - EXCLUDE sidebar */
    & table:not([data-sidebar] table) tr {
        height: var(--table-row-height) !important;
    }

    & table:not([data-sidebar] table) td,
    & table:not([data-sidebar] table) th {
        padding: var(--spacing-sm) var(--spacing-md) !important;
        font-size: var(--text-sm) !important;
        line-height: 1.4 !important;
    }

    & table:not([data-sidebar] table) thead th {
        font-size: var(--text-xs) !important;
        font-weight: 600 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.025em !important;
    }

    /* Buttons - EXCLUDE sidebar */
    & button:not(.density-ignore):not([data-sidebar] button):not([data-sidebar] *),
    & [role="button"]:not(.density-ignore):not([data-sidebar] [role="button"]):not([data-sidebar] *) {
        padding: var(--button-padding-y) var(--button-padding-x) !important;
        min-height: var(--button-height) !important;
        font-size: var(--text-sm) !important;
        border-radius: var(--border-radius) !important;
    }

    & button.h-9:not([data-sidebar] *),
    & button.h-8:not([data-sidebar] *),
    & button.h-7:not([data-sidebar] *) {
        min-height: var(--button-height) !important;
        height: var(--button-height) !important;
    }

    /* Inputs - EXCLUDE sidebar */
    & input:not([type="checkbox"]):not([type="radio"]):not([data-sidebar] input),
    & textarea:not([data-sidebar] textarea),
    & select:not([data-sidebar] select) {
        padding: var(--spacing-xs) var(--spacing-sm) !important;
        height: var(--input-height) !important;
        font-size: var(--text-sm) !important;
        border-radius: var(--border-radius) !important;
    }

    & textarea {
        height: auto !important;
        min-height: calc(var(--input-height) * 2.5) !important;
    }

    /* Badges */
    & [class*="badge"],
    & .inline-flex.items-center.rounded {
        padding: 0.125rem 0.5rem !important;
        font-size: var(--text-xs) !important;
        border-radius: calc(var(--border-radius) * 0.5) !important;
        line-height: 1.6 !important;
    }

    /* Headings */
    & h1 {
        font-size: 1.5rem !important;
        margin-bottom: var(--spacing-sm) !important;
        line-height: 1.3 !important;
    }

    & h2 {
        font-size: 1.25rem !important;
        margin-bottom: var(--spacing-sm) !important;
        line-height: 1.3 !important;
    }

    & h3 {
        font-size: 1.125rem !important;
        margin-bottom: var(--spacing-xs) !important;
        line-height: 1.4 !important;
    }

    /* Text */
    & p,
    & span,
    & div {
        font-size: var(--text-sm);
        line-height: 1.5;
    }

    & .text-sm {
        font-size: var(--text-xs) !important;
    }

    & .text-xs {
        font-size: 0.625rem !important;
    }

    /* Grid gaps - EXCLUDE sidebar */
    & .grid:not([data-sidebar] .grid) {
        gap: var(--card-gap) !important;
    }
}